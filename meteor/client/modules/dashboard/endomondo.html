<template name="endomondo">
  {{#spinner type="wave" visible=loadingEndomondoTrips}}
    {{#if endomondoTrips}}
      <div class="col-md-12">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>
                Start time
              </th>
              <th>
                Distance (km)
              </th>
              <th>
              </th>
            </tr>
          </thead>
          <tbody>
            {{#each endomondoTrips}}
              <tr>
                <td>
                  {{formatStartTime start_time}}
                </td>
                <td>
                  {{formatDistance distance_km}}
                </td>
                <td>
                  <a class="clickable endomondoTrip">
                    <i data-id="{{id}}" data-distance="{{distance_km}}" data-start="{{start_time}}" class="glyphicon glyphicon-plus"></i>
                  </a>
                </td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    {{/if}}
    {{#if endomondoAuthInfo}}
      {{#unless endomondoTrips}}
        <p>No additional valid trips found for this endomondo user</p>
      {{/unless}}
      <form id="refreshWorkouts">
        <button id="refreshWorkoutsButton" type="submit" class="btn btn-primary pull-right">
          Refresh workouts
        </button>
      </form>
      <button class="btn btn-danger pull-right" id="clearAuthInfo">Clear username/password</button>
    {{/if}}
    {{#unless endomondoAuthInfo}}
      <div class="col-md-6 pull-right">
        <form id="getWorkouts">
          <fieldset>
            <div class="form-group">
              <label for="endomondoUsername">Username</label>
              <input id="endomondoUsername" type="text" class="form-control" name="username" placeholder="username">
            </div>
            <div class="form-group">
              <label for="endomondoPassword">Password</label>
              <input id="endomondoPassword" type="password" name="password" class="form-control" placeholder="password">
            </div>
          </fieldset>
          <button type="submit" class="btn btn-primary pull-right">Get workouts</button>
        </form>
      </div>
    {{/unless}}
  {{/spinner}}
</template>
